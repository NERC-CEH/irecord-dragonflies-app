<!---------------
Species list Page
----------------->
<div data-role="page" id="list" data-update-page-padding="false">
    <div data-role="header" id="list-header" data-position="fixed" data-tap-toggle="false">
        <div class='ui-btn-left' data-role='controlgroup' data-type='horizontal'>
            <a href='info' data-role="button" data-icon="info" data-iconpos="notext">Info</a>
            <a href='#user' data-role="button" data-icon="user" data-iconpos="notext">User</a>
        </div>
        <h1 id='list_heading'></h1>
        <div class='ui-btn-right' data-role='controlgroup' data-type='horizontal'>
            <a href="#" id="fav-button" data-role="button" onclick="app.navigation.filterFavourites()"
               data-icon="star" data-iconpos="notext">Favourie</a>
            <a href="#" id="list-controls-button" data-role="button"
               data-icon="bullets" data-iconpos="notext">List Controls</a>
        </div>
        <div id="list-controls-placeholder">
            <div data-role="tabs" id="list-controls-tabs">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#filter" data-ajax="false" class="ui-btn-active">Filter</a></li>
                        <li><a href="#sort" data-ajax="false">Sort</a></li>
                    </ul>
                </div>
                <div id="sort" class="ui-body-d ui-content">
                    <div class="info-message">
                        <p>Please select the list sorting.</p>
                    </div>
                    <div id="list-controls-sort-placeholder"></div>
                </div>
                <div id="filter" class="ui-body-d ui-content">
                    <div class="info-message">
                        <p>Please check filters to apply. </p>
                    </div>
                    <div id="list-controls-filter-placeholder"></div>
                </div>
                <center>
                    <button id="list-controls-save-button">Save</button>
                </center>
            </div>
        </div>
    </div>
    <div data-role="content" >
        <script id="list-controls-sort-template" type="text/x-handlebars-template">
            <div class="ui-field-contain list-controls">
                <fieldset data-role="controlgroup" >
                    {{#each this}}
                    <input name="sort" type="radio" id="{{id}}" class="sort" {{checked}} data-iconpos="right">
                    <label for="{{id}}" class="sort">{{label}}</label>
                    {{/each}}
                </fieldset>
            </div>
        </script>
        <script id="list-controls-filter-template" type="text/x-handlebars-template">
            <div class="ui-field-contain list-controls">
                <fieldset data-role="controlgroup" >
                    {{#each this}}
                    <input type="checkbox" id="{{id}}" class="filter" {{checked}} data-iconpos="right">
                    <label for="{{id}}" class="filter">{{label}}</label>
                    {{/each}}
                </fieldset>
            </div>
        </script>

        <div id="list-placeholder"></div>
        <script id="list-template" type="text/x-handlebars-template">
            <ul data-role="listview" id="species-list" data-split-icon="gear" data-split-theme="d">
                {{#each species}}
                <li data-corners="false" data-shadow="false" data-iconshadow="true"
                    data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="c">
                    <a href="#species" onclick="app.controller.list.setCurrentSpecies('{{id}}')" class="{{favourite}}">
                        <img src="{{profile_pic}}" />
                        <p class="species-list-common-name">{{common_name}}</p>
                        <p>{{taxon}}</p>
                    </a>
                    <a href="{{../record}}" class="ios-enhanced" onclick="app.controller.list.setCurrentSpecies('{{id}}')" data-icon="plus">Record</a>
                </li>
                {{/each}}
            </ul>
        </script>
    </div>
</div>

<div data-role="page" id="species">
    <div data-role="header" data-position="fixed" data-tap-toggle="false">
        <div class='ui-btn-left' data-role='controlgroup' data-type='horizontal'>
            <a href='#' data-rel='back' data-role="button" data-icon="arrow-l" data-iconpos="notext">Back</a>
        </div>
        <h1 id='species_heading'></h1>
        <div class="ui-btn-right" data-role="controlgroup" data-type="horizontal">
            <a href="#" id="species-profile-fav-button" onclick="app.controller.species.toggleSpeciesFavourite()" data-icon="star" data-iconpos="notext" data-role="button">Gallery</a>
            <a href="#" onclick="app.controller.list.gallery.show()" data-icon="eye" data-iconpos="notext" data-role="button">Gallery</a>
        </div>
    </div>

    <div data-role="content">
        <div id="species-placeholder"></div>
        <script id="species-template" type="text/x-handlebars-template">
            <div class="gallery" id="species_gallery" style="display:none">
                {{#each gallery}}
                <a href="{{this}}"><img src="{{this}}" /></a>
                {{/each}}
            </div>
            <center>
                <img src="{{profile_pic}}">

                <ul data-role="listview" data-inset="true" style="max-width:800px;">
                    <li>
                        <div class="taxon">{{taxon}}</div>
                    </li>
                    <li>
                        <p style="white-space: normal;">{{description}}</p>
                    </li>
                    <li><strong>Distribution</strong>:
                        <p style="white-space: normal;">{{distribution}}</p></li>
                    <li><strong>Habitat</strong>:
                        <p style="white-space: normal;">{{habitat}}</p></li>
                </ul>
            </center>
        </script>
    </div>
</div>

<!------------
Recording Page
-------------->
<div data-role="page" id="record">
    <div data-role="header" data-position="fixed" data-tap-toggle="false">
        <div class='ui-btn-left' data-role='controlgroup' data-type='horizontal'>
            <a href='#' data-rel='back' data-role="button" data-icon="home" data-iconpos="notext">Back</a>
        </div>
        <h1 id='record_heading'></h1>
        <div class='ui-btn-right' data-role='controlgroup' data-type='horizontal'>
            <a href="#date" id="date-top-button" data-role="button"
               data-icon="calendar" data-iconpos="notext" >Date</a>
            <a href="#sref" id="sref-top-button" data-role="button" data-prefetch
               data-icon="location" data-iconpos="notext">GPS</a>
        </div>
    </div>
    <div data-role="content" >
        <input type="hidden" id="occurrence:record_status" name="occurrence:record_status" value="C" />
        <a  href="#date" id="date-button" data-role="button" data-icon="arrow-r" data-iconpos="right">
            <h1>Date</h1>
        </a><input type="hidden" id="imp-sref" name="sample:entered_sref" required />
        <input type="hidden" id="imp-sref-system" name="sample:entered_sref_system"  value="4326" />
        <input type="hidden" id="sref_accuracy" name="smpAttr:273"  value="-1" />
        <div id="photo"><div id="photo-picker">
            <input type="file" id="sample:image" name="sample:image" accept="png|jpg|gif|jpeg"/>
            <input type="hidden" id="sample_medium:path" name="sample_medium:path" value=""/>
        </div>
        </div>
        <table  class="numberInput ">
            <tr  class="numberInput ">
                <td  class="numberInput ">
                    <b>Number</b>
                </td><td>
                <input type="number" name="occAttr:222" id="occAttr:222"
                       min="1" max="50" value="1" data-role="none"  class="numberInput ">
            </td>
            </tr>
        </table>
        <label>
            <input type="checkbox" data-iconpos="right" id="occAttr:223"
                   name="occAttr:223" value="1">Certain</label>
        <a  href="#comment" id="comment-button" data-role="button" data-icon="arrow-r" data-iconpos="right">
            Comment
        </a>
    </div>
    <div data-role="footer" data-position="fixed"data-tap-toggle="false">
        <div class='ui-btn-left' data-role='controlgroup' data-type='horizontal'>
            <input id="entry-form-save" type="button" value="Save" data-icon="plus"
                   onclick="app.controller.record.save()" data-theme="b"  data-iconpos="right">
        </div>
        <h1 id='record_footer'></h1>
        <div class='ui-btn-right' data-role='controlgroup' data-type='horizontal'>
            <input id="entry-form-send" type="button" value="Send" data-icon="mail"
                   onclick="app.controller.record.send()" data-theme="b"  data-iconpos="right">
        </div>

    </div>
</div>
<div data-role="page" id="comment">
    <div data-role="header" data-position="fixed"data-tap-toggle="false">
        <div class='ui-btn-left' data-role='controlgroup' data-type='horizontal'>
            <a href='#' data-rel="back" data-role="button" data-iconpos="notext"
               data-icon="check" onclick="app.controller.record.saveInput('sample:comment')" >Save</a>
        </div>
        <h1>Comment</h1>
        <div class='ui-btn-right' data-role='controlgroup' data-type='horizontal'>
            <a href='#' data-rel="back" data-role="button" data-iconpos="notext"
               data-icon="delete">Cancel</a>
        </div>
    </div>
    <div data-role="content" >
        <textarea id="sample:comment" name="sample:comment" class=" "  cols="80" rows="4" ></textarea>
    </div>
    <div data-role="footer" data-position="fixed"data-tap-toggle="false"></div>
</div>
<div data-role="page" id="date">
    <div data-role="header" data-position="fixed"data-tap-toggle="false">
        <div class='ui-btn-left' data-role='controlgroup' data-type='horizontal'>
            <a href='#' data-rel="back" data-role="button" data-iconpos="notext"
               onclick="app.controller.record.saveInput('sample:date')"
               data-icon="check" >Save</a>
        </div>
        <h1>Date</h1>
        <div class='ui-btn-right' data-role='controlgroup' data-type='horizontal'>
            <a href='#' data-rel="back" data-role="button" data-iconpos="notext"
               data-icon="delete">Cancel</a>
        </div>
    </div>
    <div data-role="content" >
        <div class="info-message"><p>Please enter the date of the recording.</p></div>
        <input id="sample:date" name="sample:date" type="date" required>
    </div>
    <div data-role="footer" data-position="fixed" data-tap-toggle="false">

    </div>
</div>

<!------------
Location Page
-------------->
<div data-role="page" id="sref">
    <div data-role="header" data-position="fixed" data-tap-toggle="false">
        <div class='ui-btn-left' data-role='controlgroup' data-type='horizontal'>
            <a href='#' data-rel="back" data-role="button" data-iconpos="notext"
               data-icon="check" onclick="app.controller.sref.save()" >Save</a>
        </div>
        <h1>Location</h1>
        <div class='ui-btn-right' data-role='controlgroup' data-type='horizontal'>
            <a href='#' data-rel="back" data-role="button" data-iconpos="notext"
               data-icon="delete">Cancel</a>
        </div>
    </div>
    <div data-role="content" >
        <div data-role="tabs" id="sref-opts">
            <div data-role="navbar">
                <ul>
                    <li><a href="#gps" data-ajax="false" class="ui-btn-active">GPS</a></li>
                    <li><a href="#map" data-ajax="false">Map</a></li>
                    <li><a href="#gref" data-ajax="false">Grid Ref</a></li>
                </ul>
            </div>
            <div id="gps" class="ui-body-d ui-content">
                <script id="sref-gps" type="text/x-handlebars-template">
                    <div class="info-message" id="gps-message">
                        <p>We will try to determine your location
                            using the inbuilt phone GPS.</p><p> Please make sure you have turned the phone's
                        geolocation on and are well away from large objects.<br/> e.g. <i>trees, buildings </i></p>
                    </div>
                    <input type="button" id="gps-start-button" value="Locate">
                </script>
                <script id="sref-gps-running" type="text/x-handlebars-template">
                    <div class="info-message" id="gps-message">
                        <p>We are trying to get your location. This might take a
                        few minutes...</p>
                        {{#if location}}
                            <p> Grid Ref: {{location.gref}} <br/>
                                Lat:({{location.lat}} <br/>
                                Lon:{{location.lon}} <br/> <br/>
                                Accuracy:{{location.acc}}
                            </p>
                        {{/if}}
                    </div>
                    <input type="button" id="gps-stop-button" value="Stop">
                </script>
                <script id="sref-gps-finished" type="text/x-handlebars-template">
                    <div class="info-message" id="gps-message">
                        <p>Success!</p>
                        <p> Grid Ref: {{location.gref}} <br/><br/>
                            Lat:{{location.lat}} <br/>
                            Lon:{{location.lon}} <br/><br/>
                            Accuracy:{{location.acc}}
                        </p>
                    </div>
                    <input type="button" id="gps-improve-button" value="Improve">
                </script>
                <div id="sref-gps-placeholder"></div>
            </div>
            <div id="map" class="ui-body-d ui-content">
                <div class="info-message" id="map-message">
                    <p>Please tap on the map to select your location. </p>
                </div>
                <div id="map-canvas" style="width:100%; height: 60vh;"></div>
            </div>
            <div id="gref" class="ui-body-d ui-content">
                <div class="info-message" id="gref-message">
                    <p>Please provide a GB Grid Reference.
                        <br/> e.g. <i>"TQ 28170 77103"</i></p>
                </div>
                <input type="text" id="grid-ref" placeholder="Grid Reference"/>
                <input type="button" onclick="app.controller.sref.gridRefConvert()"
                       value="Set"/>
            </div>
        </div>
    </div>
</div>


<!-------
User Page
--------->
<div data-role="page" id="user">
    <div data-role="header" data-position="fixed"data-tap-toggle="false">
        <div class='ui-btn-left' data-role='controlgroup' data-type='horizontal'>
            <a href='#' data-rel='back' data-role="button" data-icon="arrow-l" data-iconpos="notext">Back</a>
        </div>
        <h1 id='user_heading'></h1>
        <div class='ui-btn-right' data-role='controlgroup' data-type='horizontal'>
            <a href="#" id="sendall-button" data-role="button" onclick="app.controller.user.sendAllSavedRecords()"
               data-theme="b">Send All</a>
        </div>
    </div>

    <div data-role="content">
        <div id="user-placeholder"></div>
        <script id="user-template" type="text/x-handlebars-template">
            {{#if user.loggedout}}
            <div class="warning-message">Looks like you have not Signed in yet. Please
                do so, as otherwise all the records will be submitted anonymously.
                <a href='login' data-role="button" data-icon="arrow-r" data-iconpos="right">Log in</a>
            </div>
            {{/if}}
        </script>

        <div id="saved-list-placeholder"></div>
        <script id="saved-list-template" type="text/x-handlebars-template">
            {{#if records.length}}
            <div class="info-message">Saved recordings.</div>
            <ul data-role="listview" id="saved-list" data-split-icon="gear"
                data-inset="true" data-split-theme="d">
                {{#each records}}
                <li data-corners="false" data-shadow="false" data-iconshadow="true"
                    data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="b">
                    <a href="#" onclick="app.controller.user.sendSavedRecord({{id}})">
                        <!--<img src="" />-->
                        <h3>{{common_name}}</h3>
                        <p>{{date}}</p>
                    </a>
                    <a href="#" data-icon="delete" data-ajax="false" data-theme="b"
                       onclick="app.controller.user.deleteSavedRecord({{id}})">Send</a>
                </li>
                {{/each}}
            </ul>
            {{else}}
            <div class="info-message">No saved recordings.</div>
            {{/if}}
        </script>
    </div>
</div>